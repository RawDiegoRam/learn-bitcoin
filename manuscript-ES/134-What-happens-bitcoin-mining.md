 ## ¿Qué es la Minería en Bitcoin?
No necesitas comprender cómo funciona la minería de Bitcoin para usar Bitcoin, pero si estás interesado en los detalles, lo que hacen los mineros y cómo se crea Bitcoin, sigue leyendo.

### Minería en Simples Palabras
Imagina que quieres llenar un museo con obras de arte hechas de rompecabezas, donde cada rompecabezas contribuirá a la experiencia del visitante. Hay reglas claras: solo se pueden admitir en el museo los rompecabezas que se hayan armado correctamente y hayan ganado cierto concurso. Seleccionaremos y daremos una recompensa a aquel niño que termine primero el rompecabezas más difícil. No queremos que los niños pueda engañar a los demás o que sepan de antemano qué rompecabezas ganará. A continuación, enviamos a 10,000 niños de todo el mundo el mismo rompecabezas y ellos comienzan a armarlo pieza por pieza al mismo tiempo. El niño que termine de armar todas las piezas primero gana el premio. Han demostrado que se esforzaron y el rompecabezas completado es la prueba de ello.

El proceso de construcción del rompecabezas no se puede corromper, las piezas incorrectas del rompecabezas no se pueden insertar y el niño que gana no se puede seleccionar artificialmente. El niño más rápido gana el premio. Éstas son las reglas. Solo pueden cambiarse las reglas si los padres, los niños, el diseñador del rompecabezas y el museo, todos los participantes en la red del rompecabezas, deciden colectivamente hacerlo. Aquí, cuando hablamos del premio, estamos hablando metafóricamente de la creación del bitcoin.

De eso se trata más o menos la prueba de trabajo. Miles de computadoras en todo el mundo resuelven acertijos matemáticos al mismo tiempo, lo que demuestra que se esfuerzan y, al mismo tiempo, descentralizan las ganancias de las recompensas para que nadie pueda coludirse o predecir qué minero será el próximo en agregar un bloque a la cadena. El esfuerzo que los mineros ponen para validar las transacciones y formar bloques no solo demuestra su trabajo, sino que también le otorga seguridad a la cadena de bloques. No podemos cambiar el pasado (transacciones históricas) en la cadena de bloques de Bitcoin sin gastar mucho dinero en infraestructura y electricidad para reescribir la cadena de bloques. Es por eso que los ataques a la red Bitcoin son posibles en teoría, pero en realidad son muy, muy costosos.

### La Minería en Detalle

Imagina que ya estás usando Bitcoin y tienes una cartera Bitcoin instalada en tu teléfono inteligente. Entonces tu solicitas un producto en Internet, eligiendo bitcoin como forma de pago. El sitio te mostrará la dirección de Bitcoin de la tienda y usarás tu cartera móvil para enviar la cantidad de pago requerido. Entonces sucede lo siguiente:

Tu cartera va a firmar tu transacción. Luego se transmite a la red Bitcoin y entra en un grupo de otras transacciones no confirmadas, que se llama Mempool (el tanque de memoria). El beneficiario recibe tu transacción y su nodo completo valida dicha transacción. Sin embargo, él todavía espera la confirmación de que la transacción se haya agregado con éxito a un bloque antes de determinar el finiquito. En este momento, todavía vemos en nuestra cartera que nuestra transacción se ha enviado, pero que todavía está pendiente, lo que significa que aún no se ha registrado finalmente en la cadena de bloques. Tiene cero confirmaciones en este momento.

Al mismo tiempo, los mineros también reciben tu transacción en el Mempool de sus nodos. Un minero de Bitcoin es un dispositivo especializado llamado ASIC. Su única tarea es ejecutar el algoritmo hash y resolver el rompecabezas de minería lo más rápido posible. Hay cientos de miles de ellos, descentralizados en todo el mundo.

Los mineros también tienen en ejecución un software de nodo completo que valida nuestras transacciones, verificando que se siguieron todas las reglas del protocolo y que tú, como pagador, tienes suficientes bitcoins para pagar la transacción. Si la respuesta a todas estas verificaciones es "sí" o "verdadero", tu transacción será agregada a una plantilla de bloque del minero. Pero antes que nada, cuando se genera una nueva plantilla de bloque, el minero inserta la así llamada transacción "coinbase" o transacción de "acuñado" que, en caso de ganar la carrera minera, les pagará con 6.25 bitcoins como recompensa. Después de construir la transacción de acuñado, las computadoras seleccionan transacciones del Mempool y las agregan a la plantilla de bloque generada previamente.

Al mismo tiempo, las computadoras de hash (ASICs) están comenzando a resolver el rompecabezas matemático. Compiten con todas las demás computadoras de minería en todo el mundo. El hash que resuelva el rompecabezas primero, transmite el bloque a sus nodos pares, quienes lo verifican y lo re-transmiten a sus pares, y así sucesivamente hasta que todos los nodos de la red hayan verificado y almacenado el nuevo bloque. Después de que se agregan 99 bloques más a la cadena de bloques, el minero ganador puede gastar el premio creado anteriormente de 6.25 bitcoins.

El beneficiario de esta transacción, de hecho, su nodo completo, recibirá el nuevo bloque y lo validará nuevamente y finalmente confirmará tu transacción. Tu pago ahora está incorporado a la cadena en un nuevo bloque de datos y se ha finiquitado. Vas a recibir una confirmación en tu cartera Bitcoin de que el pago ha llegado al destinatario. Ves en tu cartera que tu transacción tiene 1 confirmación. Aproximadamente cada 10 minutos se creará y se agregará un nuevo bloque después del bloque que contiene tu transacción. Después de seis bloques, tu transacción se considerará prácticamente irreversible.

El período de tiempo que tu transacción necesita para ser confirmada, depende de la comisión de transacción que hayas seleccionando y pagado. Cuanto más alta sea esta comisión de red, más rápido los mineros insertarán tu transacción en un bloque, porque ellos se quedan con estas comisiones, además de la recompensa de bloque de 6.25 bitcoins.

¿Cuál es el por qué de este acertijo matemático? La Prueba-de-Trabajo requiere muchos recursos ya que las computadoras requieren grandes cantidades de energía. Este hecho ha llevado a la critica de Bitcoin, a la luz de los cambios climáticos que los humanos hemos creado en las últimas décadas. En el capítulo 3.1.11 "Huella ecológica de Bitcoin" tratamos esta cuestión con más detalle.

¿Por qué necesitamos usar tanta electricidad? La respuesta es por seguridad y descentralización. La necesidad de poner esfuerzo y energía en la minería protege los datos de la cadena de bloques de ser manipulados y los hace inmutables e incensurables. Ningún estado ni organización puede cambiar la cadena de bloques.

Desde su creación en 2009, la cadena de bloques de Bitcoin nunca ha sido pirateada. Hasta ahora se han creado alrededor de 18,74 millones de bitcoins, que actualmente tienen un valor de más de seiscientos mil millones de dólares (para junio de 2021). Si bien un pirateo exitoso de la red Bitcoin sería preocupante y destruiría mucha credibilidad, requeriría que al menos el 51% de la potencia minera de Bitcoin se concentrara en un solo propietario o conglomerado. Esto podría permitir que una parte malintencionada genere nuevos bloques más rápido que el otro 49% de los mineros, lo que significa que, en teoría, podrían anular el consenso. Pero tal ataque no puede robar, redirigir o gastar bitcoins sin firmas. Los atacantes solo podían intentar gastar dos veces su propio bitcoin en los bloques más recientes y causar interrupciones por denegación de servicio en la creación de bloques futuros.

Además, si un ataque contra Bitcoin tuviera éxito alguna vez, entonces la cadena de bloques de Bitcoin se dividiría como lo ha hecho varias veces antes. Los participantes en la cadena de bloques de Bitcoin podrían optar por cambiar para admitir la cadena 'nueva' o continuar apoyando la versión de la cadena 'antigua'. Esta división de versiones debido a reglas inherentes se conoce como "hard fork" o bifurcación dura. El hard fork de 2017 que creo la bifurcación entre Bitcoin/Bitcoin-Cash demostró que esto no sería perjudicial para la legitimidad de la cadena de bloques en sí.

La segunda función principal de la minería es garantizar la descentralización. Por un lado, para hacer que la creación de dinero sea independiente de las entidades centrales y los acaparamientos de poder humano como los bancos centrales, y por otro lado para garantizar que ningún minero pueda obtener ventajas y manipular la cadena de bloques. La tarea de cálculo es difícil y al mismo tiempo, como en cualquier sorteo, es cuestión de suerte qué ordenador va a encontrar primero una solución válida. Como resultado, no es posible predecir quién será la próxima computadora ganadora, lo que hace imposible influir en la cadena de bloques. Si no se sabe quién será el próximo, no es posible manipularle y extraer la recompensa.

Si estás pensando en comenzar a usar bitcoin, ten la seguridad de que la cadena de bloques está protegida mediante minería y se distribuye de manera idéntica en miles de computadoras diferentes. Es muy, muy segura. Tu tarea más importante sería la auto-custodia de tus propios bitcoins y mantener seguras tus llaves privadas (tus contraseñas).
